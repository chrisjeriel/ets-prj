<form #myForm="ngForm">
<div class="row">
    <div class="col-sm-12">
        <fieldset class="scheduler-border">
            <legend class="scheduler-border">JV Info</legend>
               <div class="form-row custom-row-inline-inset" style="margin-top: -2px !important;margin-right: 5px !important;">
                <div class="input-group" style="margin-top: 14px !important;margin-bottom: -20px !important;">
                    <label class="form-control-sm col-sm-1" style="height: auto;">JV No</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-3" style="margin-right: 2px !important" style="text-align: right;" readonly name="entryData.jvYear" [(ngModel)]="entryData.jvYear">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-3" style="text-align: right; margin-left:2px" readonly name="entryData.jvNo" [(ngModel)]="entryData.jvNo">
                            <label class="form-control-sm col-sm">Date</label>
                            <div class="col-sm-4 dp-cont">
                                <datepicker [type]="'date'" [showIcon]="true" [value]="entryData.jvDate?.split('T')[0]" (valueChange)="entryData.jvDate=dc($event,entryData.jvDate,'d')" [required]="true" name="entryData.jvDate"  [disabled]="approvedStat"></datepicker>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4" style="padding: 0;">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <div class="col-sm-2 dp-cont" style="margin-left: -4px !important">
                            <datepicker [type]="'time'" [showIcon]="true" [value]="entryData.jvDate?.split('T')[1]" (valueChange)="entryData.jvDate=dc($event,entryData.jvDate,'t')" [required]="true"  [disabled]="approvedStat"></datepicker>
                            </div>
                            <label class="form-control-sm col-sm-2">Status</label>
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-5" readonly [(ngModel)]="entryData.statusName" name="entryData.jvStatusName">
                            <label class="form-control-sm col-sm-2">Auto</label> 
                            <input type="checkbox" name="autoTag" style="margin-top: 5px;margin-left: 8px" [checked]="entryData.autoTag === 'Y'" (change)="entryData.autoTag = (entryData.autoTag === 'Y') ? 'N' : 'Y'" disabled name="entryData.autoTag">
                        </div>
                    </div>
                    <label class="form-control-sm col-sm-1" style="    margin-left: -10px;">Ref No</label>
                    <input type="text" class="form-control form-control-sm cust-sm col-sm" style="margin-right: 4px !important;margin-left: 16px !important;" name="entryData.refNo" [readonly]="approvedStat" [(ngModel)]="entryData.refNo">
                    <div style="margin-left: -19px !important;margin-right: 13px !important;z-index: 200;font-size: 14px;"><a><i class="fa fa-search" (click)="openLov('refNo')"></i></a></div>
                </div>
                <div class="input-group" style="margin-bottom: -13px !important">
                    <label class="form-control-sm col-sm-1" style="height: auto;">JV Type</label>
                    <div class="col-sm-8">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                        <input type="text" class="form-control form-control-sm cust-sm col-sm required tranTypeName" style="margin-right: 1px !important;" appRequired name="entryData.tranTypeName" [readonly]="approvedStat" [(ngModel)]="entryData.tranTypeName">
                         <div style="margin-left: -19px !important;margin-right: 0px !important;z-index: 200;font-size: 14px;"><a (click)="openJVType()"><i class="fa fa-search"></i></a></div> 
                        </div>
                    </div>
                    <label class="form-control-sm col-sm-1" >Ref No Date</label>
                    <div class="col-sm dp-cont" style="margin-left: 6px !important;margin-right: 11px !important">
                    <datepicker [type]="'date'" [showIcon]="true"></datepicker>
                    </div>
                </div>
                <div class="input-group" style="margin-bottom: -15px !important;">
                    <label class="form-control-sm col-sm-1" style="height: auto;">Particulars</label>
                    <div class="col-sm">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <textarea class="form-control form-control-sm required" style="font-size: 11px; min-height: 55px; margin-bottom: 11px;"  appRequired name="entryData.particulars" [readonly]="approvedStat" [(ngModel)]="entryData.particulars"></textarea>
                        </div>
                    </div>
                </div>
                <div class="input-group" style="margin-bottom: -17px !important;">
                    <label class="form-control-sm col-sm-1" style="height: auto;">Amount</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-2 required currCd" style="margin-right: -1px !important;" [(ngModel)]="entryData.currCd" appRequired name="entryData.currCd" [readonly]="approvedStat">
                            <div style="margin-left: -19px !important;margin-right: 6px !important;z-index: 200;font-size: 14px;"><a><i class="fa fa-search" (click)="currLov.modal.openNoClose()"></i></a></div>
                            <input type="text" class="form-control form-control-sm cust-sm col-sm required" style="margin-left: 3px !important;" style="text-align: right;margin-left: 3px;"  appRequired (change)="validateCurr();" appCurrency name="entryData.jvAmt" [readonly]="approvedStat" [(ngModel)]="this.entryData.jvAmt">
                            <label class="form-control-sm col-sm-3" style="height: auto;">Currency Rate</label>
                        </div>
                    </div>
                    <input type="text" class="form-control form-control-sm cust-sm col-sm required" style="margin-right: 2px !important; text-align: right;" appCurrencyRate appRequired name="entryData.currRate" (change)="validateCurr()" [readonly]="approvedStat" [(ngModel)]="this.entryData.currRate">
                    <label class="form-control-sm col-sm-1" style="height: auto;">Local Amount</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-2" style="margin-right: 2px !important;" value="PHP" readonly tabindex="-1" name="entryData.localCurr">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm" style="text-align: right;" tabindex="-1" readonly appCurrency name="entryData.localAmt" [(ngModel)]="this.entryData.localAmt">
                        </div>
                    </div>
                </div>
                <div class="input-group" style="margin-top: 20px !important;">
                    <label class="form-control-sm col-sm-1" style="height: auto;">Prepared By</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-9 required preparedName" style="margin-right: 2px !important" appRequired name="entryData.preparedName" [readonly]="approvedStat" [(ngModel)]="entryData.preparedName">
                            <div style="margin-left: -19px !important;margin-right: 10px !important;z-index: 200;font-size: 14px;"><a><i class="fa fa-search" (click)="onClickPrintable()"></i></a></div>
                        </div>
                    </div>
                    <div class="col-sm-2"></div>
                    <label class="form-control-sm col-sm-1" style="height: auto;">Approved By</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                             <input type="text" class="form-control form-control-sm cust-sm col-sm" readonly name="entryData.approvedBy">
                        </div>
                    </div>
                </div>
                <div class="input-group" style="margin-bottom: -20px !important;">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-4"> 
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <input type="text" class="form-control form-control-sm cust-sm col-sm-9 required" style="margin-right: 2px !important" appRequired name="entryData.prepared" readonly [(ngModel)]="entryData.preparedPosition">
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                             <input type="text" class="form-control form-control-sm cust-sm col-sm" readonly name="entryData.approved">
                        </div>
                    </div>
                </div>
                <div class="input-group" style="margin-top: 20px !important;">
                    <label class="form-control-sm col-sm-1" style="height: auto;">Date Prepared</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <div class="col-sm-5 dp-cont">
                                <datepicker [type]="'date'" [required]="true" [showIcon]="true" [value]="entryData.preparedDate?.split('T')[0]" (valueChange)="entryData.preparedDate=dc($event,entryData.preparedDate,'d')" appRequired name="entryData.preparedDate"  [disabled]="approvedStat"></datepicker>
                            </div>

                            <div class="col-sm-4 dp-cont">
                                <datepicker [type]="'time'" [required]="true" [showIcon]="true" [value]="entryData.preparedDate?.split('T')[1]" (valueChange)="entryData.preparedDate=dc($event,entryData.preparedDate,'t')" appRequired name="entryData.time"  [disabled]="approvedStat"></datepicker>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2"></div>
                    <label class="form-control-sm col-sm-1" style="height: auto;">Date Approved</label>
                    <div class="col-sm-4">
                        <div class="form-row custom-row-inline-inset" style="margin-top: 0px !important;">
                            <div class="col-sm dp-cont">
                                <datepicker [type]="'date'" required [showIcon]="true" [value]="entryData.approvedDate?.split('T')[0]" (valueChange)="entryData.approvedDate=dc($event,entryData.approvedDate,'d')" disabled name="entryData.approvedDate1"></datepicker>
                            </div>
                            <div class="col-sm dp-cont">
                                <datepicker [type]="'time'" required [showIcon]="true" [value]="entryData.approvedDate?.split('T')[1]" (valueChange)="entryData.approvedDate=dc($event,entryData.approvedDate,'t')" disabled name="entryData.approvedDate2"></datepicker>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <div class="form-row">
                <div class="form-group col-sm">
                    <div class="col-md-12 text-center">
                        <div class="cust-btn-container" style="margin-top: 10px;">
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" (click)="newJV()"><a>New JV</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat" (click)="onClickSave()"><a>Save</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat" (click)="onClickCancelJV()"><a>Cancel JV</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat" (click)="onClickApprove()"><a>Approve</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat"><a>Print</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat "><a>Upload Acct. Ent</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat"><a>Alloc. Trans.</a></button>
                            <button type="button" class="cust" style="margin-right: 5px !important; width: 10%" [disabled]="approvedStat" [class.cust-btn-disabled]="approvedStat"><a>Debit/Credit Memo</a></button>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="col-sm-12">
        <fieldset class="scheduler-border" style="margin: 0px !important; margin-top: 12px !important;">
            <div class="form-row custom-row-inline-inset" style="margin-left: -27px;">
                <div class="input-group" style="margin-bottom: -15px !important;">
                    <label class="form-control-sm col-sm-1 text-right labels">Created By</label>
                    <input type="text" class="form-control form-control-sm col-sm-2" readonly [(ngModel)]="entryData.createUser" name="entryData.createUser">
                    <label class="form-control-sm col-sm-1 text-right labels">Date Created</label>
                    <input type="datetime-local" class="form-control form-control-sm col-sm-2" readonly [(ngModel)]="entryData.createDate" name="entryData.createDate">
                    <label class="form-control-sm col-sm-1 text-right labels">Last Update By</label>
                    <input type="text" class="form-control form-control-sm col-sm-2" readonly [(ngModel)]="entryData.updateUser" name="entryData.updateUser">
                    <label class="form-control-sm col-sm-1 text-right labels">Last Update</label>
                    <input type="datetime-local" class="form-control form-control-sm col-sm-2" readonly [(ngModel)]="entryData.updateDate" name="entryData.updateDate">
                </div>
            </div>
        </fieldset>
    </div>
</div>
</form>

<app-modal class="d-none" id="approve" #ApproveJV>
    <div header>Confirmation</div>  
    <div body style=" max-width: 450px;">
        <div class="form-row custom-row-inline-inset">
            <span class="col-sm-2"></span>
            <label class="form-control-sm col-sm-10 text-right labels" style="text-align: left !important;font-size: 14px !important">Are you sure you want to approve this Journal Voucher?</label>
            <div class="input-group">
                <label class="form-control-sm col-sm-4 text-right labels">Approved By</label>
                <input type="text" class="form-control form-control-sm col-sm-7" readonly [(ngModel)]="entryData.approver">
                <div style="margin-left: -19px !important;margin-right: 10px !important;z-index: 200;font-size: 14px;"><a><i class="fa fa-search" (click)="onClickApproval()"></i></a></div>
            </div>
            <div class="input-group">
                <label class="form-control-sm col-sm-4 text-right labels">Date Approved</label>
                <div class="col-sm-7 dp-cont">
                    <datepicker [type]="'date'" required [showIcon]="true" [value]="entryData.approverDate?.split('T')[0]" (valueChange)="entryData.approverDate=dc($event,entryData.approverDate,'d')"></datepicker>
                </div>
            </div>
        </div>
    </div>
    <div footer class="text-center">
        <button type="button" class="cust-btn" (click)="approveJVStatus();approveJV.closeModal();"><a>Approve</a></button>
        <button type="button" class="cust-btn" (click)="approveJV.closeModal();"><a>Cancel</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="cancelAcct" #CancelEntries>
    <div header>Confirmartion</div>  
    <div body>
        <div class="form-row custom-row-inline-inset">
            <span class="col-sm-2"></span>
            <label class="form-control-sm col-sm-10 text-right labels" style="text-align: left !important;font-size: 14px !important">Are you sure you want to cancel this Journal Voucher?</label>
        </div>
    </div>
    <div footer class="text-center">
        <button type="button" class="cust-btn" (click)="cancelEntries.closeModal();cancelJV()"><a>Yes</a></button>
        <button type="button" class="cust-btn" (click)="cancelEntries.closeModal();"><a>No</a></button>
    </div>
</app-modal>

<app-mtn-currency #currencyModal (selectedData)="setCurrency($event)" [effDateFrom]="entryData.jvDate"></app-mtn-currency>
<app-mtn-printable-names id="printableNames" (selectedData)="setPrintable($event)"></app-mtn-printable-names>
<app-sucess-dialog [icon]="dialogIcon" [message]="dialogMessage"></app-sucess-dialog>
<app-confirm-save id="JVEntry" (onYes)="saveData()"></app-confirm-save>
<app-cancel-button (onYes)="saveData('cancel')" [url]="'/journal-voucher'" ></app-cancel-button>
<app-mtn-acse-trantype id="jvTypeModal" (selectedData)="setTranType($event)"></app-mtn-acse-trantype>