<img src="app/resources/images/Loading_icon2.gif" alt="loading.gif" id="loading" class="" style="position: absolute;top:50%;left:50%;-ms-transform: translate(-50%,-50%);transform: translate(-50%,-50%);z-index: 999999" *ngIf="loading">
<div style="position: fixed;width: 100%;height: 100%;z-index: 991;background-color: rgba(255, 255, 255, 0.5);" *ngIf="loading"></div>
<div class="cust-tabs-container">
	<h4>Accounting Service / Utilities/ Batch OR Printing</h4>
		<ngb-tabset (tabChange)="onTabChange($event)">
			<ngb-tab>
				<ng-template ngbTabTitle>
					<div>Batch Invoice Printing</div>
				</ng-template>
				<ng-template ngbTabContent>
						<fieldset class="scheduler-border">
							<legend class="scheduler-border">Filter Options</legend>
							<div class="form-row custom-row-inline-inset">
								<div class="col-sm">
									<div class="input-group cust-ig">
										<label class="form-control-sm col-sm-3">JV Type</label>
											<select class="form-control form-control-sm cust-sm col-sm cust-sm required" [(ngModel)]="jvTypeCd" name="jvTypeCd">
												<option *ngFor="let jv of jvTypes" [value]="jv.jvTypeCd">{{jv.jvTypeName}}</option>
											</select>
									</div>
								</div>
								<div class="col-sm">
									<div class="input-group cust-ig">
										<label class="form-control-sm col-sm-3">JV No</label>
											<input type="text" class="form-control form-control-sm cust-sm col-sm" [(ngModel)] = "jvNo"  onkeypress='return  event.charCode == 46 || event.charCode >= 48 && event.charCode <= 57'>
											<!-- option *ngFor="let payt of paymentTypes" [value]="payt.tranTypeCd">{{payt.tranTypeName}}</option> -->		
									</div>
								</div>
								<div class="col-sm-6">
									<div class="input-group cust-ig">
										<label class="form-control-sm col-sm-2">JV Date: </label>
										<label class="form-control-sm col-sm-1">From </label>
										<div class="col-sm dp-cont">
											<datepicker [type]="'date'" [showIcon]="true" [value]="fromDate.split('T')[0]" (valueChange)="fromDate=$event"></datepicker>
										</div>
										<label class="form-control-sm col-sm-1">To </label>
										<div class="col-sm dp-cont">
											<datepicker [type]="'date'" [showIcon]="true" [value]="toDate.split('T')[0]" (valueChange)="toDate=$event"></datepicker>
										</div>
									</div>
								</div>
								<div class="col-sm-1">
									<div class="input-group cust-ig">
										<button type="button" class="cust-btn" [disabled]="boolSearch" (click)="onClickSearch()"><a>Search</a></button>
									</div> 
								</div>
							</div>
						</fieldset>
						<fieldset class="scheduler-border" style="margin-top: 5px !important;margin-bottom: 5px !important"> 
								<div class="form-row custom-row-inline-inset">
									<div class="col-sm-12">
											<app-cust-editable-non-datatable #batchInvoice [passData]="PassData" (genericBtn)="viewInvoice()" (newClick)="onTableClick($event)" (add)="add()">
												<ng-container controls-l>
														<input class="form-control-sm " type="radio" name="opttagradio" id="untag" value="untag" [(ngModel)]="radioTagVal" style="margin-left: 15px" [disabled]="boolRadioTag" (change)="onRadioTagChange()">
														<label class="form-control-sm">Untag All</label> 
														<input class="form-control-sm " type="radio" name="opttagradio" id="untag" value="tag" [(ngModel)]="radioTagVal" style="margin-left: 15px" [disabled]="boolRadioTag" (change)="onRadioTagChange()"> 
														<label class="form-control-sm">Tag All</label> 
								                </ng-container>
											</app-cust-editable-non-datatable>
									</div>
								</div>
						</fieldset>
						<div class="input-group" style="margin-top: 10px !important;">
							<div class="col-sm-2"></div>
							<div class="col-sm">
										<fieldset class="scheduler-border">
											<div class="input-group cust-ig" style="margin-top: 20px !important;">
												<label class="form-control-sm col-sm-3 text">Start With:</label>
												<div class="col-sm">
													<div class="row">
														<label class="form-control-sm col-sm-4 text">Invoice No.</label>
														<input type="text" class="form-control form-control-sm cust-sm col-sm" [(ngModel)] = "invoiceNo"  onkeypress='return  event.charCode == 46 || event.charCode >= 48 && event.charCode <= 57'>
													</div>
												</div>
											</div>
											<div class="input-group cust-ig" style="margin-bottom: 10px !important;margin-top: 20px !important">
												<div class="col-sm-7"></div> 
												<button type="button" class="cust-btn col-sm" [disabled]="genInvoiceBool" (click)="generateInvoice()"><a>Generate Invoice </a></button>
											</div>
									  </fieldset>
							</div>
							<div class="col-sm">
									<fieldset class="scheduler-border">
										<div class="input-group cust-ig" style="margin-top: 10px !important">
											<label class="form-control-sm col-sm-3">Destination</label>
											<select class="form-control form-control-sm cust-sm col-sm">
											    <option>Printer</option>
											</select>
											<div class="col-sm-1"></div>
										</div>
										<div class="input-group cust-ig">
											<label class="form-control-sm col-sm-3">Printer Name</label>
											<select class="form-control form-control-sm cust-sm col-sm">
											    <option>Default</option>
											</select> 
											<div class="col-sm-1"></div>
										</div>
										<div class="input-group cust-ig" style="margin-bottom: 10px !important;margin-top: 5px !important">
											<div class="col-sm-3"></div>
											<button type="button" class="cust-btn col-sm" style="z-index : 9px ! important" [disabled]="printInvoiceBool" (click)="printInvoice()"><a>Print Invoice</a></button>
											<button type="button" class="cust-btn col-sm" style="z-index : 9px ! important" [disabled]="stopInvoiceBool" (click)="stopInvoice()"><a>Stop Printing</a></button>
											<div class="col-sm-1"></div>
									    </div>

									</fieldset>
							</div>
							<div class="col-sm-2"></div>
							</div>
				</ng-template>
			</ngb-tab>
			<ngb-tab id="Exit">
				<ng-template ngbTabTitle>
					<div>Exit</div>
				</ng-template>
				<ng-template ngbTabContent>
				</ng-template>
			</ngb-tab>
		</ngb-tabset>
</div>
<app-sucess-dialog [icon]="dialogIcon" [message]="dialogMessage"></app-sucess-dialog>

<app-modal class="d-none" #printModal>
	<div header>Confirmation</div>
	<div body>
	  <div style="text-align: center">
	  	<p style="margin: 0px">Was the printing of Invoice successful?</p>
	  </div>
	</div>
	<div footer>
      <div class="d-flex justify-content-center text-center">
        <div class="col-sm-12 text-center">
          <button class="cust-btn" type="button" (click)="printMdl.closeModal();updateOrStatus();"><a>Yes</a></button>
          <button class="cust-btn" type="button" (click)="printMdl.closeModal();printConfirmModal.open();"><a>No</a></button>
        </div>
      </div>
  	</div>
</app-modal>

<app-modal class="d-none" #printConfirmModal>
	<div header>Confirmation</div>
	<div body>
	  <div style="text-align: center">
	  	<p style="margin: 0px">Indicate the last successfully printed Invoice Number:</p>
	  </div>
	  <!-- <input type="text" class="form-control form-control-sm cust-sm col-sm" [(ngModel)] = "lastOrNo"  onkeypress='return  event.charCode == 46 || event.charCode >= 48 && event.charCode <= 57'> PROD#ERROR -->
	  <input type="text" class="form-control form-control-sm cust-sm col-sm" onkeypress='return  event.charCode == 46 || event.charCode >= 48 && event.charCode <= 57'>
	</div>
	<div footer class="text-center w-100">
      <div class="d-flex justify-content-center text-center">
        <div class="col-sm-12 text-center">
          <button class="cust-btn" type="button" (click)="printConfirmModal.closeModal();failedOrPrint();"><a>OK</a></button>
        </div>
      </div>
  	</div>
</app-modal>

<app-modal class="d-none">
	 <div header>View Invoice Details</div>
		<div body>
			<div class="max-size" style="width: 1000px">
				<fieldset class="scheduler-border">
					<legend class="scheduler-border">Invoice Info</legend>
											                                <div class="form-row custom-row-inline-inset" style="margin-top: -5px !important;">
											                                    <div class="input-group" style="margin-top: 20px">
											                                    	<div class="col-sm-7" style="padding: 0px">
											                                    		<div class="input-group">
											                                    			  <label class="form-control-sm col-sm-2">Invoice No</label>
											                                    			  <input type="text" class="form-control form-control-sm col-sm-4" placeholder="INV-0003245"readonly>
											                                    			  <label class="form-control-sm col-sm-2">Issue Date</label>
											                                    			  <input type="date" class="form-control form-control-sm cust-sm col-sm" placeholder="12/01/2018" style="margin-right: 3px !important;" value="12-01-2018" readonly>
											                                    			  <input type="text" class="form-control form-control-sm col-sm-2" placeholder="10:45 AM" readonly>
											                                    		</div>
											                                    	</div>
											                                    	<div class="col-sm-5" style="padding: 0px">
											                                    		<div class="input-group">
												                                    		  <label class="form-control-sm col-sm-7">Status</label>
												                                    		  <input type="text" class="form-control form-control-sm col-sm" placeholder="New" readonly>
											                                    		</div>
											                                    	</div>
											                                    </div>
											                                    <div class="input-group" style="margin-top: 0px">
											                                    	<div class="col-sm-7" style="padding: 0px">
											                                    		<div class="input-group">
											                                    			<label class="form-control-sm col-sm-2">Tran type</label>
											                                    			<input type="text" class="form-control form-control-sm col-sm" placeholder="Payment of Service Fee by in-Trust to Service Accounting" readonly>
											                                    		</div>
											                                    	</div>
											                                    	<div class="col-sm-5" style="padding: 0px">
											                                    		<div class="input-group">
												                                    		  <label class="form-control-sm col-sm-2">JV No</label>
												                                    		  <input type="text" class="form-control form-control-sm col-sm-3" placeholder="2018-0002353" readonly>
												                                    		  <label class="form-control-sm col-sm-2">JV Date</label>
												                                    		  <input type="datetime-local" class="form-control form-control-sm col-sm" value="2018-10-01T10:45" readonly>
											                                    		</div>
											                                    	</div>
											                                    </div>
											                                    <div class="input-group" style="margin-top: 0px">
											                                    	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Billed To</label>
											                                    	<input type="text" class="form-control form-control-sm col-sm" placeholder="UCPBGEN" readonly>
											                                    </div>
											                                     <div class="input-group" style="margin-top: -6px">
											                                     	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Particulars</label>
											                                    	<textarea style="font-size: 12px; margin-bottom: 38px;" class="form-control form-control-sm col-sm" placeholder="Requesting payment of Service Fee by in-Trust to Service Accounting" readonly></textarea>
											                                    </div>
											                                    <div class="input-group" style="margin-top: -15px">
											                                    	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Amount</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-1" placeholder="PHP" readonly>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="27,513.20" style="margin-left: 3px" readonly>
											                                    	 <label class="form-control-sm col-sm-2">Curreny</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="1.000000" readonly>
											                                    	 <label class="form-control-sm col-sm-2" style="margin-left: 12px">Local Amount</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-1" placeholder="PHP" readonly>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="27,513.20" style="margin-left: 3px" readonly>
											                                    </div>
											                                </div>
			</fieldset>
			<fieldset class="scheduler-border" style="margin-top: 8px !important; margin-bottom: 10px !important;">
				<div class="custom-row-inline-inset">
					<div class="form-row" style="margin-bottom: -10px;">
						<div class="input-group">
							<label class="form-control-sm col-sm" style="margin-left: -105px" >Created By</label>
							<input type="text" class="form-control form-control-sm col-sm" placeholder="cuaresma" readonly>
							<label class="form-control-sm col-sm" style="margin-left: -100px">Date Created</label>
							<input type="datetime-local" class="form-control form-control-sm col-sm" value="2018-10-01T10:45" readonly>
							<label class="form-control-sm col-sm"  style="margin-left: -90px" >Last Update By</label>
							<input type="text" class="form-control form-control-sm col-sm" placeholder="cuaresma" readonly>
							<label class="form-control-sm col-sm"  style="margin-left: -105px">Last Update</label>
							<input type="datetime-local" class="form-control form-control-sm col-sm" value="2018-10-02T10:00" readonly>
						</div>
					</div>
				</div>
			</fieldset>
		</div>
	</div>
	<div footer style="width: 100%; text-align: center;">
		<button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Cancel</a></button>
		<button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Ok</a></button>
	</div>                
</app-modal>

<app-modal class="d-none" id="add">
	 <div header>Add Invoice Details</div>
		<div body>
			<div class="max-size" style="width: 1000px">
				<fieldset class="scheduler-border">
					<legend class="scheduler-border">Invoice Info</legend>
											                                <div class="form-row custom-row-inline-inset" style="margin-top: -5px !important;">
											                                    <div class="input-group" style="margin-top: 20px">
											                                    	<div class="col-sm-7" style="padding: 0px">
											                                    		<div class="input-group">
											                                    			  <label class="form-control-sm col-sm-2">Invoice No</label>
											                                    			  <input type="text" class="form-control form-control-sm col-sm-4" placeholder="">
											                                    			  <label class="form-control-sm col-sm-2">Issue Date</label>
											                                    			  <input type="date" class="form-control form-control-sm cust-sm col-sm" placeholder="" style="margin-right: 3px !important;" value="" >
											                                    			  <input type="text" class="form-control form-control-sm col-sm-2" placeholder="" >
											                                    		</div>
											                                    	</div>
											                                    	<div class="col-sm-5" style="padding: 0px">
											                                    		<div class="input-group">
												                                    		  <label class="form-control-sm col-sm-7">Status</label>
												                                    		  <input type="text" class="form-control form-control-sm col-sm" placeholder="" >
											                                    		</div>
											                                    	</div>
											                                    </div>
											                                    <div class="input-group" style="margin-top: 0px">
											                                    	<div class="col-sm-7" style="padding: 0px">
											                                    		<div class="input-group">
											                                    			<label class="form-control-sm col-sm-2">Tran type</label>
											                                    			<input type="text" class="form-control form-control-sm col-sm" placeholder="">
											                                    			 <div class="text-search-ico" style="margin-top: -2px;"><a><i class="fa fa-search"></i></a></div>
											                                    		</div>
											                                    	</div>
											                                    	<div class="col-sm-5" style="padding: 0px">
											                                    		<div class="input-group">
												                                    		  <label class="form-control-sm col-sm-2">JV No</label>
												                                    		  <input type="text" class="form-control form-control-sm col-sm-3" placeholder="" >
												                                    		  <div class="text-search-ico" style="margin-top: -2px;"><a><i class="fa fa-search"></i></a></div>
												                                    		  <label class="form-control-sm col-sm-2">JV Date</label>
												                                    		  <input type="datetime-local" class="form-control form-control-sm col-sm" value="" >
											                                    		</div>
											                                    	</div>
											                                    </div>
											                                    <div class="input-group" style="margin-top: 0px">
											                                    	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Billed To</label>
											                                    	<input type="text" class="form-control form-control-sm col-sm" placeholder="">
											                                    </div>
											                                     <div class="input-group" style="margin-top: -6px">
											                                     	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Particulars</label>
											                                    	<textarea style="font-size: 12px; margin-bottom: 38px;" class="form-control form-control-sm col-sm" placeholder=""></textarea>
											                                    </div>
											                                    <div class="input-group" style="margin-top: -15px">
											                                    	<label class="form-control-sm col-sm-1" style="margin-left: 14px">Amount</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-1" placeholder="">
											                                    	  <div class="text-search-ico" style="margin-top: -2px;"><a><i class="fa fa-search"></i></a></div>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="" style="margin-left: 8px">
											                                    	 <label class="form-control-sm col-sm-2">Curreny</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="">
											                                    	 <label class="form-control-sm col-sm-2" style="margin-left: 12px">Local Amount</label>
											                                    	 <input type="text" class="form-control form-control-sm col-sm-1" placeholder="" >
											                                    	 <input type="text" class="form-control form-control-sm col-sm-2 text-right" placeholder="" style="margin-left: 3px" >
											                                    </div>
											                                </div>
			</fieldset>
			<fieldset class="scheduler-border" style="margin-top: 8px !important; margin-bottom: 10px !important;">
				<div class="custom-row-inline-inset">
					<div class="form-row" style="margin-bottom: -10px;">
						<div class="input-group">
							<label class="form-control-sm col-sm" style="margin-left: -105px" >Created By</label>
							<input type="text" class="form-control form-control-sm col-sm" placeholder="" >
							<label class="form-control-sm col-sm" style="margin-left: -100px">Date Created</label>
							<input type="datetime-local" class="form-control form-control-sm col-sm" value="" >
							<label class="form-control-sm col-sm"  style="margin-left: -90px" >Last Update By</label>
							<input type="text" class="form-control form-control-sm col-sm" placeholder="" >
							<label class="form-control-sm col-sm"  style="margin-left: -105px">Last Update</label>
							<input type="datetime-local" class="form-control form-control-sm col-sm" value="" >
						</div>
					</div>
				</div>
			</fieldset>
		</div>
	</div>
	<div footer style="width: 100%; text-align: center;">
		<button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Cancel</a></button>
		<button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Ok</a></button>
	</div>                
</app-modal>




