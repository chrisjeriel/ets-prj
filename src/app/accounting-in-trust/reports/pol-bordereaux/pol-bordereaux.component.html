<img src="app/resources/images/Loading_icon2.gif" alt="loading.gif" id="loading" class="" style="position: absolute;top:50%;left:50%;-ms-transform: translate(-50%,-50%);transform: translate(-50%,-50%);z-index: 999999" *ngIf="loading">
<div style="position: fixed;width: 100%;height: 100%;z-index: 991;background-color: rgba(255, 255, 255, 0.5);" *ngIf="loading">
</div>
<div class="row">
	<div class="col-sm-1"></div>
		<div class="col-sm-10">
					   <div class="row" style="margin-top: 15px;">
							<div class="col-sm-12">
								<div class="input-group" style="margin-bottom: 0 !important;">
									<span class="col-sm-1"></span>
									<fieldset class="scheduler-border col-sm">
										<div class="custom-row-inline-inset">
											<div class="input-group cust-ig" style="padding-top: 4px">
												<label class="form-control-sm col-sm-2">Report Name</label>
												<input type="text" class="form-control form-control-sm col-sm-2 report" [ngModel]="params.reportId"
												 (ngModelChange)="params.reportId = $event.toUpperCase()" (change)="checkCode($event, 'report'); " appRequired>
												<div class="text-search-ico"><a><i class="fa fa-search" (click)="getReports()"></i></a></div>
												<input type="text" class="form-control form-control-sm col-sm-7 cap-input" [(ngModel)]="params.reportName" readonly style="margin-left:2px">
											</div>
										</div>
									</fieldset>
									<span class="col-sm-1"></span>
								</div>
								<div class="input-group" style="margin-bottom: 0 !important;">
								  <!-- <div class="col-sm-3" style="padding: 0px;margin-top: 15px !important;">
								  	<fieldset class="scheduler-border">
										<div class="form-row custom-row-inline-inset">
											<div class="input-group" style="margin-bottom: -14px !important;">
												<input id="radio7" class="form-control-sm" type="radio" name="basisDate" value="5" style="margin: 0 0 0 45px" [ngModel]="params.dateParam" (ngModelChange)="params.dateParam = $event;checkReport()"
													[disabled]="paramsToggle.indexOf('accountingDate') == -1">
												<label class="form-control-sm" for="radio7">Accounting Date</label>
											</div>
											<div class="input-group" >
												<input id="radio8" class="form-control-sm" type="radio" name="basisDate" value="10" style="margin: 0 0 0 45px" [ngModel]="params.dateParam" (ngModelChange)="params.dateParam = $event;checkReport()"
													[disabled]="paramsToggle.indexOf('bookingDate') == -1">
												<label class="form-control-sm" for="radio8">Booking Date</label>
											</div>
										</div>
									</fieldset>
								  </div> -->
								  	<span class="col-sm-1"></span>
									  	<fieldset class="scheduler-border col-sm-2" style="margin-right: 5px !important;">
											<legend class="scheduler-border" style="visibility: hidden; padding-top: 24px !important; padding-left: 0px !important; padding-right: 0px !important;"></legend>
											<div class="form-row custom-row-inline-inset">
												<div class="input-group">
													<input id="radio7" class="form-control-sm" type="radio" name="basisDate" value="5" style="margin: 0 0 0 20px" [ngModel]="params.dateParam" (ngModelChange)="params.dateParam = $event;checkReport()"
														[disabled]="paramsToggle.indexOf('accountingDate') == -1">
													<label class="form-control-sm" for="radio7">Accounting Date</label>
												</div>
												<div class="input-group">
													<input id="radio8" class="form-control-sm" type="radio" name="basisDate" value="10" style="margin: 0 0 0 20px" [ngModel]="params.dateParam" (ngModelChange)="params.dateParam = $event;checkReport()"
														[disabled]="paramsToggle.indexOf('bookingDate') == -1">
													<label class="form-control-sm" for="radio8">Booking Date</label>
												</div>
											</div>
										</fieldset>
								  		<fieldset class="scheduler-border col-sm" style="margin-left: 5px !important;">
								  			<legend class="scheduler-border" style="visibility: hidden; padding-top: 24px !important; padding-left: 0px !important; padding-right: 0px !important;"></legend>
										<div class="form-row custom-row-inline-inset">
											<div class="input-group">
												<span class="col-sm-2"></span>
												<input id="radio2" class="form-control-sm" type="radio" name="dateRadio" value="1" style="margin: 0 0 0 15px" [(ngModel)]="params.dateRange" (click)="removeDates()"
													[disabled]="paramsToggle.indexOf('byDate') == -1" >
												<label class="form-control-sm" for="radio2">By Date</label>
											</div>
											<div class="input-group" style="margin-bottom: -5px !important;">
												<span class="col-sm-2"></span>
												<label class="form-control-sm col-sm-1">From</label>
												<div class="col-sm-3 dp-cont">
													<datepicker [type]="'date'" [showIcon]="true" [value]="params.byDateFrom?.split('T')[0]" (valueChange)="params.byDateFrom=$event;" [disabled]="params.dateRange != 1 || paramsToggle.indexOf('byDate') == -1" [required]="true"></datepicker>
												</div>
												<label class="form-control-sm col-sm-1">To</label>
												<div class="col-sm-3 dp-cont">
													<datepicker [type]="'date'" [showIcon]="true" [value]="params.byDateTo?.split('T')[0]" (valueChange)="params.byDateTo=$event;" [disabled]="params.dateRange != 1 || paramsToggle.indexOf('byDate') == -1" [required]="true"></datepicker>
												</div>
												<span class="col-sm-2"></span>
											</div>
											<div class="input-group">
												<span class="col-sm-2"></span>
												<input id="radio3" class="form-control-sm" type="radio" name="dateRadio" value="2" style="margin: 0 0 0 15px" [ngModel]="params.dateRange" (ngModelChange)="params.dateRange = $event;checkMonthYear()" (click)="removeDates()" [disabled]="paramsToggle.indexOf('byMonthYear') == -1">
												<label class="form-control-sm" for="radio3">By Month/Year</label>
											</div>
											<div class="input-group">
												<span class="col-sm-2"></span>
												<label class="form-control-sm col-sm-1">From</label>
												<select class="form-control form-control-sm cust-sm col-sm-2" [ngModel]="params.byMonthFrom" (ngModelChange)="params.byMonthFrom = $event;checkMonthYear()" [disabled]="params.dateRange != 2 || paramsToggle.indexOf('byMonthYear') == -1" appRequired>
													<option value="1"> January </option>
													<option value="2"> February </option>
													<option value="3"> March </option>
													<option value="4"> April </option>
													<option value="5"> May </option>
													<option value="6"> June </option>
													<option value="7"> July </option>
													<option value="8"> August </option>
													<option value="9"> September </option>
													<option value="10"> October </option>
													<option value="11"> November </option>
													<option value="12"> December </option>
												</select>
												<input type="text" class="form-control form-control-sm col-sm-1 text-right" style="margin-left: 3px !important;" [ngModel]="params.byMonthFromYear" (ngModelChange)="params.byMonthFromYear = $event;checkMonthYear()" [disabled]="params.dateRange != 2 || paramsToggle.indexOf('byMonthYear') == -1" appRequired>
												<label class="form-control-sm col-sm-1">To</label>
												<select class="form-control form-control-sm cust-sm col-sm-2" [(ngModel)]="params.byMonthTo" [disabled]="params.dateRange != 2 || paramsToggle.indexOf('byMonthYear') == -1 ||disableTo" appRequired>
													<option value="1"> January </option>
													<option value="2"> February </option>
													<option value="3"> March </option>
													<option value="4"> April </option>
													<option value="5"> May </option>
													<option value="6"> June </option>
													<option value="7"> July </option>
													<option value="8"> August </option>
													<option value="9"> September </option>
													<option value="10"> October </option>
													<option value="11"> November </option>
													<option value="12"> December </option>
												</select>
												<input type="text" class="form-control form-control-sm col-sm-1 text-right" style="margin-left: 3px !important;" [(ngModel)]="params.byMonthToYear" [disabled]="params.dateRange != 2 || disableTo" appRequired>
												<span class="col-sm-2"></span>
											</div>
											<!-- <div class="input-group">
												<div class="col-sm text-center" style="margin-bottom: 10px">
													<div class="cust-btn-container">
														<button type="button" class="cust-btn" (click)="rangeLOV.openNoClose();retrieveRange();" style="margin-top: 5px;" [disabled]="extractDisabled"  ><a>SI Range</a></button>
													</div>
												</div>
											</div> -->
										</div>
									</fieldset>
									<span class="col-sm-1"></span>	
								</div>
								<div class="input-group" style="margin-bottom: 0 !important;">
									<span class="col-sm-1"></span>
									<fieldset class="scheduler-border col-sm" style="padding: 8px 0 7px 0px !important;">
										<legend class="scheduler-border" style="visibility: hidden; padding-top: 24px !important; padding-left: 0px !important; padding-right: 0px !important;"></legend>
										<!-- <div class="row">
											<div class="col-sm-1">
											</div>
											<div class="col-sm">
												<div class="input-group" style="margin-bottom: 0px !important;padding-top: 10px;">
													<label class="form-control-sm col-sm-2" style="margin-bottom: -6px !important;">Line</label>
													<input type="text" class="form-control form-control-sm col-sm-2" [ngModel]="params.lineCd" (ngModelChange)="params.lineCd = $event.toUpperCase()"  (change)="checkCode($event, 'line')"
													[disabled]="paramsToggle.indexOf('line') == -1">
													<div class="text-search-ico" *ngIf="paramsToggle.indexOf('line') > -1"><a><i class="fa fa-search" (click)="getLine()"></i></a></div>
													<span>&nbsp;</span>
													<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.lineName" readonly placeholder="ALL LINES">
												</div>
											</div>
											<div class="col-sm-1">
											</div>
										</div>
										<div class="row" style="margin-bottom: 10px;">
											<div class="col-sm-1">
											</div>
											<div class="col-sm">
												<div class="input-group">
													<label class="form-control-sm col-sm-2" style="margin-bottom: 0px !important;">Company</label>
													<input type="text" class="form-control form-control-sm col-sm-2" [(ngModel)]="params.cedingId" (change)="checkCode($event, 'company')"
													[disabled]="paramsToggle.indexOf('company') == -1">
													<div class="text-search-ico" *ngIf="paramsToggle.indexOf('company') > -1"><a><i class="fa fa-search" (click)="showCedingCompanyLOV()"></i></a></div>
													<span>&nbsp;</span>
													<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.cedingName" readonly placeholder="ALL COMPANIES">
												</div>
											</div>
											<div class="col-sm-1">
											</div>
										</div>
										<div class="row" style="margin-bottom: 10px;">
											<div class="col-sm-1">
											</div>
											<div class="col-sm">
												<div class="input-group">
													<label class="form-control-sm col-sm-2" style="margin-bottom: 0px !important;">Currency</label>
													<input type="text" class="form-control form-control-sm col-sm-2" [ngModel]="params.currCd" (ngModelChange)="params.currCd = $event.toUpperCase()" (change)="checkCode($event, 'currCd')"
													[disabled]="paramsToggle.indexOf('currCd') == -1">
													<div class="text-search-ico" *ngIf="paramsToggle.indexOf('currCd') > -1"><a><i class="fa fa-search" (click)="showCurrencyModal()"></i></a></div>
													<span>&nbsp;</span>
													<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.currdesc" readonly placeholder="ALL CURRENCIES">
												</div>
											</div>
											<div class="col-sm-1">
											</div>
										</div> -->

										<div class="input-group">
											<span class="col-sm-1"></span>
											<label class="form-control-sm col-sm-2">Line</label>
											<input type="text" class="form-control form-control-sm col-sm-2" [ngModel]="params.lineCd" (ngModelChange)="params.lineCd = $event.toUpperCase()"  (change)="checkCode($event, 'line')"
											[disabled]="paramsToggle.indexOf('line') == -1">
											<div class="text-search-ico" *ngIf="paramsToggle.indexOf('line') > -1"><a><i class="fa fa-search" (click)="getLine()"></i></a></div>
											<span>&nbsp;</span>
											<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.lineName" readonly placeholder="ALL LINES">
											<span class="col-sm-1"></span>
										</div>
										<div class="input-group">
											<span class="col-sm-1"></span>
											<label class="form-control-sm col-sm-2">Company</label>
											<input [appRequired]="params.reportId=='POLR052I'" type="text" class="form-control form-control-sm col-sm-2" [(ngModel)]="params.cedingId" (change)="checkCode($event, 'company')"
											[disabled]="paramsToggle.indexOf('company') == -1">
											<div class="text-search-ico" *ngIf="paramsToggle.indexOf('company') > -1"><a><i class="fa fa-search" (click)="showCedingCompanyLOV()"></i></a></div>
											<span>&nbsp;</span>
											<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.cedingName" readonly placeholder="ALL COMPANIES">
											<span class="col-sm-1"></span>
										</div>
										<div class="input-group">
											<span class="col-sm-1"></span>
											<label class="form-control-sm col-sm-2">Currency</label>
											<input type="text" class="form-control form-control-sm col-sm-2" [ngModel]="params.currCd" (ngModelChange)="params.currCd = $event.toUpperCase()" (change)="checkCode($event, 'currCd')"
											[disabled]="paramsToggle.indexOf('currCd') == -1">
											<div class="text-search-ico" *ngIf="paramsToggle.indexOf('currCd') > -1"><a><i class="fa fa-search" (click)="showCurrencyModal()"></i></a></div>
											<span>&nbsp;</span>
											<input type="text" class="form-control form-control-sm col-sm cap-input" [(ngModel)]="params.currdesc" readonly placeholder="ALL CURRENCIES">
											<span class="col-sm-1"></span>
										</div>
										<div class="input-group" *ngIf="params.reportId == 'POLR052I'">
											<span class="col-sm-3"></span>
											<div class="col-sm-3 p-0">
												<input type="checkbox" name="faculPlacement" [ngModel]="params.faculTag == 'Y'" 
														(ngModelChange)="params.faculTag = params.faculTag == 'Y'? 'N' : 'Y'">
												<label class="form-control-sm">
													Facultative Placement Only
												</label>
											</div>
										</div>

										<!-- <div class="row">
											<div class="col-sm-3">
											</div>
											<div class="col-sm">
												<div class="input-group align-rad text-center" style="padding-top: 10px;padding-bottom: 10px;">
													<input id="radirt4" class="form-control-sm" type="radio" name="incRecTag" value="D" style="margin: 0 0 0 0px" [(ngModel)]="params.incRecTag"
														[disabled]="paramsToggle.indexOf('distributed') == -1">
													<label class="form-control-sm" for="radirt4">Distributed Only</label>
													<input id="radirt6" class="form-control-sm" type="radio" name="incRecTag" value="U" style="margin: 0 0 0 15px" [(ngModel)]="params.incRecTag"
														[disabled]="paramsToggle.indexOf('undistributed') == -1">
													<label class="form-control-sm" for="radirt6">Undistributed</label>
													<input id="radirt5" class="form-control-sm" type="radio" name="incRecTag" value="A" style="margin: 0 0 0 15px" [(ngModel)]="params.incRecTag"
														[disabled]="paramsToggle.indexOf('alldistribution') == -1">
													<label class="form-control-sm" for="radirt5">All(Including Undistributed)</label>
												</div>
											</div>
											<div class="col-sm-3">
											</div>
										</div> -->
									</fieldset>
									<span class="col-sm-1"></span>
								</div>
								<div class="input-group" style="margin-bottom: 0 !important;">
									<span class="col-sm-1"></span>
									<fieldset class="scheduler-border col-sm" style="padding-bottom: 13px !important; padding-top: 13px !important;">
										<legend class="scheduler-border" style="visibility: hidden; padding-top: 24px !important; padding-left: 0px !important; padding-right: 0px !important;"></legend>
										<div class="row">
											<div class="col-sm-1"></div>
											<div class="col-sm">
												<div class="input-group" style="margin-bottom: 0px !important;">
													<label class="form-control-sm col-sm-3" style="margin-bottom: -6px !important;">Destination</label>
													<select class="form-control form-control-sm cust-sm" [(ngModel)]="params.destination">
														<option value="screen">Screen</option>
								    					<option value="dlPdf">PDF</option>
								    					<option value="printPdf">Printer</option>
								    					<option value="exl">Excel</option>

													</select>
													<div class="col-sm-2"></div>
												</div>
											</div>
											<div class="col-sm-1">
											</div>
										</div>
									</fieldset>
									<span class="col-sm-1"></span>
								</div>
				<div class="col-md-13 text-center" style="margin-top: 10px; margin-bottom: 5px;">
					<div class="cust-btn-container">
						<button type="button" class="cust-btn" (click)="onClickCancel();"><a>Cancel</a></button>
						<button type="button" class="cust-btn" (click)="extract();" [disabled]="extractDisabled"><a>Extract</a></button>
						<button type="button" class="cust-btn" (click)="print();"><a>Print</a></button>
					</div>
				</div>
				</div>
			</div>
		</div>
	<div class="col-sm-1"></div>
</div>

<app-modal class="d-none" id="extract" #polReportsModal>
    <div header>{{ modalHeader }}</div>  
    <div body class="w-100 text-center">
    	<span *ngIf="modalMode == 'reExtract'">Extracted records on the specified parameters already exists. <br>Do you want to extract the record again?</span>

    	<span *ngIf="modalMode != 'reExtract'">{{ modalBody }}</span>
    </div>
    <div footer class="w-100 text-center">
        <button *ngIf="modalMode == 'reExtract'" type="button" class="cust-btn" (click)="polReportsModal.closeModal();forceExtract();extract();"><a>Yes</a></button>
        <button *ngIf="modalMode == 'reExtract'" type="button" class="cust-btn" (click)="polReportsModal.closeModal();"><a>No</a></button>
        <button *ngIf="modalMode != 'reExtract'" type="button" class="cust-btn" (click)="polReportsModal.closeModal();"><a>Ok</a></button>
    </div>
</app-modal>

<!-- <app-modal class="d-none" id="range" #Range>
	<div header>SI Range</div>
	<div body>
		<app-cust-editable-non-datatable [passData]="passData" (genericBtn)="deleteCurr()" (onDelete)="table.onClickDelete('force');passData.disableGeneric=true;" (newClick)="onRowClick($event)" (tableDataChange)="update($event)"></app-cust-editable-non-datatable>
	</div>
	<div footer>
        <div class="d-flex justify-content-center">
            <button class="cust-btn" type="button" (click)="siClickCancel();"><a>Cancel</a></button>
            <button class="cust-btn" type="button" (click)="onClickSave()"><a>Save</a></button>
        </div>
    </div>
    <app-cancel-button (onYes)="saveRange(true)" (no)="rangeLOV.closeModal();"></app-cancel-button>
    <app-sucess-dialog #success [icon]="dialogIcon" [message]="dialogMessage" (onOk)="cancelFlag && dialogIcon!='error' ? this.cancelBtn.onNo():null"></app-sucess-dialog>
</app-modal> -->

<app-mtn-currency-code  #currencyModal id="currencyModal" (selectedData)="setCurrency($event)"></app-mtn-currency-code>
<app-lov [passData]="passLov" (selectedData)="setReport($event)">
<app-mtn-line id="lineLOV" (selectedData)="setLine($event)"></app-mtn-line>
<!-- <app-confirm-save (onYes)="saveRange()"></app-confirm-save> -->
<app-ceding-company id="cedingCompanyLOV" #ceding (selectedData)="setCedingcompany($event)" [activeTag]="''" [membershipTag]="''"></app-ceding-company>
<app-sucess-dialog #appDialog [icon]="dialogIcon" [message]="dialogMessage" (onOk)="tableFlag ? null:modalService.dismissAll();"></app-sucess-dialog>