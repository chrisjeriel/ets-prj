<style>
	.table th, .table td {
    	padding: 5px !important;
	}

	ul.timeline {
    list-style-type: none;
    position: relative;
	}
	ul.timeline:before {
	    content: ' ';
	    background: #d4d9df;
	    display: inline-block;
	    position: absolute;
	    left: 29px;
	    width: 2px;
	    height: 100%;
	    z-index: 400;
	}
	ul.timeline > li {
	    margin: 20px -10px;
	    padding-left: 20px;
	}
	/*ul.timeline > li:before {
	    content: ' ';
	    background: white;
	    display: inline-block;
	    position: absolute;
	    border-radius: 50%;
	    border: 3px solid #22c0e8;
	    left: 20px;
	    width: 20px;
	    height: 20px;
	    z-index: 400;
	}*/
	.btn-action {
		margin-right: 1px;
		text-decoration: none;
		border: none;
		background-color: white;
		padding: 0px 2px;
	}

	.btn-action a {
		font-size: 14px !important;
		font-weight: 700;
	}

	.note-title {
		font-size: 12px !important;
		font-weight: 700;
	}

	.note-date-time {
		font-size: 12px !important;
		font-weight: 400;
	}

	p {
		font-size: 13px;
    	font-weight: 400;
	}

	.accordion .card {
	  width: 98% !important;
	}

	div.card {
	  width: 98% !important;
	}

	.ngbAccordion {
	  width: 98% !important;
	}

	#relRecordsGrp {
		margin-right: 10px !important;
	}

	#relRecordsGrp:hover {
		background-color: #79797936 !important;
	}

	.spanBadge {
		float: left;
	    width: 26px;
	    border: .67px solid gray;
	    border-radius: 1px 12px 12px 1px;
	    margin-top: 3px;
	    font-size: 12px;
	    margin-left: -19px;
	}

</style>

<div id="noteDiv" style="border: 1px solid #c5c3c3; padding: 1em; max-height: 400px; overflow: auto; overflow-y:scroll ">
	<div>
		<div class="row">
			<div class="col-md-12">
				<div class="input-group">
					<div class="col-sm-4 text-center">
						<div class="selectdiv ">
			        		<select  [(ngModel)]="selectedNotes" (change)="tabSelectedNotesController($event);">
					            <option value="atm"><a>Assigned To Me</a></option>
					            <option value="mn"><a>My Notes</a></option>
			        		</select>
			        	</div>
					</div>
					<div class="col-sm-8">
						<h4 class="text-center" style="margin-top: 5px ! important">Notes</h4>
					</div>
				</div>

				<div class="row"  *ngIf="loadingFlag">       
    				<img src="app/resources/images/Loading_icon2.gif" alt="loading.gif" id="loading" class="m-auto" style="margin-bottom: 8px !important">
				</div>

				<ul class="timeline">
					<li *ngFor="let notes of noteList; let i = index">
					  <div>	
						
						<div>

							<span *ngIf="notes.impTag == 'Y' && notes.urgTag == 'N'" class="spanBadge" style="background-color: #ffff00ad;">&nbsp;</span>
							<span *ngIf="notes.impTag == 'N' && notes.urgTag == 'Y'" class="spanBadge" style="background-color: #ffa500ad;">&nbsp;</span>
							<span *ngIf="notes.impTag == 'Y' && notes.urgTag == 'Y'" class="spanBadge" style="background-color: #ff0000ad;">&nbsp;</span>
							<span style="float: left;"><a class="note-title" href="#">&nbsp;{{ notes.title }}</a></span>
						</div>
						<br/>
						<a class="note-date-time" href="#">{{ notes.createDate | date:'MMM dd, yyyy hh:mm a' }}</a>
						<div class="float-right" *ngIf="noteBool">
								<button class="btn-action"(click)="updateNoteModal(   notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  true)"><a href="#"><fa name="check"></fa></a></button>
								<button class="btn-action" (click)="showNoteModal(    notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  true)"><a href="#"><fa name="eye"></fa></a></button>
						</div>

						<div class="float-right" *ngIf="!noteBool">
								<button class="btn-action" (click)="updateNoteModal(  notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  true)"><a href="#"><fa name="check"></fa></a></button>
								<button class="btn-action" (click)="showNoteModal(    notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  true)"><a href="#"><fa name="eye"></fa></a></button>
  							    <button class="btn-action" (click)="showNoteModal(    notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  false)"><a href="#"><fa name="pencil"></fa></a></button>
								<button class="btn-action" (click)="updateNoteModal(  notes.noteId,
																					  notes.title,
																					  notes.note,
																					  notes.assignedTo, 
																					  notes.createUser,
																					  notes.createDate,
																					  notes.updateUser,
																					  notes.updateDate,
																					  false)"><a href="#"><fa name="trash"></fa></a></button> 
						</div>

						<p style="margin: 0 0 0px 0 ! important">{{ notes.note }}</p>


					  </div>
					    <div *ngIf="notes.module != ''">
					    	<p *ngIf="notes.module == 'Quotation'" style="font-size: 12px; margin-bottom: 0px !important;">Created on <b>{{ notes.module }}</b> - <a href="#" (click)="redirectToQuoteGenInfo('detail', notes);">{{ notes.details }}</a></p>
					    	<p *ngIf="notes.module == 'Policy'" style="font-size: 12px; margin-bottom: 0px !important;">Created on <b>{{ notes.module }}</b> - <a href="#" (click)="redirectToPolGenInfo('detail', notes.details);">{{ notes.details }}</a></p>
					    </div>

					    <div  *ngIf="noteBool && notes.createUser != null">
						<p style="font-size: 12px; margin-bottom: 0px !important;">Assigned by <b>{{ notes.createUser }}</b> - {{ notes.createDate  | date:'MM-dd-yyyy hh:mm:ss a' }} </p> 
					    </div>

					    <div  *ngIf="!noteBool && notes.assignedTo != null">
						<p style="font-size: 12px; margin-bottom: 0px !important;">Assigned to <b>{{ notes.assignedTo }}</b> - {{ notes.createDate  | date:'MM-dd-yyyy hh:mm:ss a' }} </p> 
					    </div>

					    <div *ngIf="notes.relatedRecordList != null" style="width: 98% !important;">
					    	<p style="border-bottom: 1px solid #00000020;">
						    	<ngb-accordion #acc="ngbAccordion">
								  	<ngb-panel>
			                            <ng-template ngbPanelTitle>
			                                <fa name="list-ul"></fa>&nbsp;Related Records
			                            </ng-template>
			                            <ng-template ngbPanelContent>
			                            	<div *ngFor="let relRecord of notes.relatedRecordList;" id="relRecordsGrp">
			                            		<button *ngIf="relRecord.module == 'QUOTATION' && relRecord.referenceNo != notes.details" (click)="redirectToQuoteGenInfo('related',relRecord);" class="button btn btn-link">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-level-up" style="transform: rotate(90deg);"></i><span style="font-weight: 600;">&nbsp;&nbsp;Quotation {{'[' + relRecord.referenceNo + ']'}}</span></button>
			                                	<br *ngIf="relRecord.module == 'QUOTATION' && relRecord.referenceNo != notes.details" />

			                                	<button *ngIf="relRecord.module == 'POLICY' && relRecord.referenceNo != notes.details" (click)="redirectToPolGenInfo('related',relRecord);" class="button btn btn-link">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-level-up" style="transform: rotate(90deg);"></i><span style="font-weight: 600;">&nbsp;&nbsp;Policy {{'[' + relRecord.referenceNo + ']'}}</span></button>
			                                	<br *ngIf="relRecord.module == 'POLICY' && relRecord.referenceNo != notes.details" />

			                                	<button *ngIf="relRecord.module == 'CLAIM' && relRecord.referenceNo != notes.details" [routerLink]="['users-maintenance']" class="button btn btn-link">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-level-up" style="transform: rotate(90deg);"></i><span style="font-weight: 600;">&nbsp;&nbsp;Claim {{'[' + relRecord.referenceNo + ']'}}</span></button>
			                                	<br *ngIf="relRecord.module == 'CLAIM' && relRecord.referenceNo != notes.details" />
			                            	</div>
			                            </ng-template>
			                    	</ngb-panel>
							    </ngb-accordion>
						    </p>
					    </div>
					    <hr/>
					</li>
					<li *ngIf="noteNull">
			        	<div>
			        		<p class="text-center">No Records for notes.</p>
			        	</div>
			        </li> 
				</ul>
			</div>
		</div>
	</div>
</div>

<app-modal class="d-none" id="confirmModal">
    <div header>Confirmation</div>
    <div body *ngIf=updateMode>Are you sure you want to complete this note?</div>
    <div body *ngIf=!updateMode>Are you sure you want to delete this note?</div>
    <div footer class="cust-btn-container">
        <button class="cust-btn" (click)="onClickYes(updateMode)">Yes</button>
        <button class="cust-btn" (click)="onClickNo()">No</button>
    </div>
</app-modal>

<app-wf-notes-form id="noteModal" (onYes)="saveNote($event)"></app-wf-notes-form>
<app-sucess-dialog [icon]="dialogIcon" [message]="dialogMessage" (onOk)="onOkSuccessDiag(onOkVar);"></app-sucess-dialog>
