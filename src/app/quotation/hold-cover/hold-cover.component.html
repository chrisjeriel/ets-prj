<div class="cust-tabs-container">
    <h4>Quotation</h4>
    <ngb-tabset (tabChange)="onTabChange($event)">
        <ngb-tab title="Quotation to Hold Cover">
            <ng-template ngbTabContent>
                 <div class="row">
                    <div class="col-sm-2"></div>
                    <div class="col-sm-8">
                        <fieldset class="scheduler-border">
                            <legend class="scheduler-border">Quotation Info</legend>
                            <div class="col-sm-1"></div>
                            <div class="col-sm">
                                <div class="row" style="margin-right: 0px; margin-bottom: 11px;">
                                    <div class="input-group" style="margin-top: -10px;">
                                        &nbsp;
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <label class="form-control-sm col-sm-2">Quotation No</label>
                                            <input type="text" class="form-control form-control-sm cap-input col-sm-1 warn" maxlength="3" appRequired ngbTooltip="Line" #qline [(ngModel)]="qLine" (change)="getQuoteInfo()" (keyup.enter)="searchMatchingQuote($event)">
                                            <input type="text" class="form-control form-control-sm cap-input col-sm-1 warn" maxlength="4" appRequired ngbTooltip="Year" #qyear style="margin-left: 3px;" [(ngModel)]="qYear" (change)="getQuoteInfo()" numbers-only (keyup.enter)="searchMatchingQuote($event)">
                                            <input type="text" class="form-control form-control-sm cap-input col-sm-2 warn text-right" maxlength="5" appRequired ngbTooltip="Sequence No" #qseqNo style="margin-left: 3px;" [(ngModel)]="qSeqNo" (blur)="fmtSq(qseqNo.value)"
                                            (change)="getQuoteInfo()" numbers-only (keyup.enter)="searchMatchingQuote($event)">
                                            <input type="text" class="form-control form-control-sm cap-input col-sm-1 warn text-right" maxlength="2" appRequired ngbTooltip="Revision No" #qrevNo (blur)="fmtRn(qrevNo.value)" style="margin-left: 3px;" [(ngModel)]="qRevNo" (change)="getQuoteInfo()" numbers-only (keyup.enter)="searchMatchingQuote($event)">
                                            <input type="text" class="form-control form-control-sm cap-input col-sm-1 warn text-right" maxlength="3" appRequired ngbTooltip="Company No" #qcomNo (blur)="fmtCn(qcomNo.value)" style="margin-left: 3px;" [(ngModel)]="qCedingId" 
                                            (change)="getQuoteInfo()" numbers-only (keyup.enter)="searchMatchingQuote($event)">
                                            <span>&nbsp;</span>
                                            <div><a (click)="search()"><i class="fa fa-search"></i></a></div>
                                            <div class="form-group" style="margin-bottom: 0px !important;margin-top: -3px !important;">
                                                <div class="cust-btn-container" style="margin-left: 15px;">
                                                    <button type="button" class="cust-btn" style="z-index: 3 !important" (click)="onClickClear()">Clear</button>
                                                </div>
                                            </div>
                                           <!--  <div><a (click)="searchMatchingQuote()"><i class="fa fa-search"></i></a></div> -->
                                        </div>
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <label class="form-control-sm col-sm-2">Ceding Company</label>
                                            <input type="text" class="form-control form-control-sm"  [(ngModel)]="cedCo"  readonly tabindex="-1">
                                        </div>
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <label class="form-control-sm col-sm-2">Insured</label>
                                            <input type="text" class="form-control form-control-sm" [(ngModel)]="insured" readonly tabindex="-1">
                                        </div>
                                        <div class="input-group" style="margin-bottom: -9px !important;">
                                            <label class="form-control-sm col-sm-2">Risk</label>
                                            <input type="text" class="form-control form-control-sm" [(ngModel)]="risk" readonly tabindex="-1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="col-sm-2"></div>
                </div>
                <br>
                <div class="row">
                    <div class="col-sm-2"></div>
                    <div class="col-sm-8">
                        <fieldset class="scheduler-border" style="margin-top: -25px !important;">
                            <legend class="scheduler-border">Hold Cover Details</legend>
                            <!-- <div class="col-sm-3"></div> -->
                            <div class="col-sm">
                                <div class="row" style="margin-right: 0px; margin-bottom: 11px;">
                                    <div class="input-group" style="margin-top: -10px;">
                                        &nbsp;
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <label class="form-control-sm col-sm-2">Hold Cover No</label>
                                            <input type="text" class="form-control form-control-sm cust-sm" readonly [(ngModel)]="holdCover.holdCoverNo">
                                            <label class="form-control-sm col-sm-2">Option No</label>
                                            <input type="text" class="form-control form-control-sm col-sm-7 warn" #optId id="optionId" readonly [(ngModel)]="holdCover.optionId" appRequired (change)="searchOptNo(optId.value)" numbers-only>
                                            <div *ngIf="optLovEnabled" class="text-search-ico" (click)="onClickOptionLOV()"><a><i class="fa fa-search"></i></a></div>
                                        </div>
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
                                                <div class="input-group" style="margin-bottom: -0px !important;">
                                                    <label class="form-control-sm col-sm-4">Period From</label>
                                                    <input type="{{type}}" class="form-control form-control-sm cust-sm warn col-sm" readonly appRequired #periodFrom (blur)="setPeriodTo(periodFrom.value)" [ngModel]="holdCover.periodFrom.split('T')[0]" (ngModelChange)="holdCover.periodFrom=$event" id="periodFrom">
                                                    <input type="{{typeTime}}" style="margin-left: 3px !important" id="periodFromTime" readonly appRequired class="form-control form-control-sm cust-sm warn col-sm-3" [ngModel]="holdCover.periodFrom.split('T')[1]" (ngModelChange)="periodFromTime=$event">
                                                </div>
                                            </div>
                                            <div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
                                                <div class="input-group" style="margin-bottom: -0px !important;">
                                                    <label class="form-control-sm col-sm-4">Requested By</label>
                                                     <input type="text" class="form-control form-control-sm col-sm" readonly id="reqBy"  maxlength="50" #reqBy [(ngModel)]="holdCover.reqBy" >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                           <div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
                                                <div class="input-group" style="margin-bottom: -0px !important;">
                                                    <label class="form-control-sm col-sm-4">Period To</label>
                                                    <input type="{{type}}" class="form-control form-control-sm cust-sm warn col-sm" readonly id="periodTo" appRequired #periodTo [ngModel]="holdCover.periodTo.split('T')[0]" (ngModelChange)="holdCover.periodTo=$event"  min="{{ holdCover.periodFrom.split('T')[0] }}" (blur)="limitPeriodTo(periodFrom.value)">
                                                    <input type="{{typeTime}}" style="margin-left: 3px !important" id="periodToTime" readonly appRequired class="form-control form-control-sm cust-sm warn col-sm-3" [ngModel]="holdCover.periodTo.split('T')[1]" (ngModelChange)="periodToTime=$event">
                                                </div>
                                            </div>
                                            <div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
                                                <div class="input-group" style="margin-bottom: -0px !important;">
                                                    <label class="form-control-sm col-sm-4">Request Date</label>
                                                    <input type="{{type}}" class="form-control form-control-sm cust-sm col-sm" readonly id="reqDate" #reqDate [ngModel]="holdCover.reqDate.split('T')[0]" (ngModelChange)="holdCover.reqDate=$event">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="input-group" style="margin-bottom: -14px !important;">
                                            <label class="form-control-sm col-sm-2" style="padding-left: 0px !important;" >Co. Ref. Hold Cover No</label>
                                            <input type="text" class="form-control form-control-sm" #coRef maxlength="25" id="coRef"  readonly [(ngModel)]="holdCover.compRefHoldCovNo" >
                                            <label class="form-control-sm col-sm-2">Prepared By</label>
                                            <input type="text" class="form-control form-control-sm col-sm-7" maxlength="50" #prepBy [(ngModel)]="holdCover.preparedBy" readonly tabindex="-1">
                                        </div>
                                        <div class="input-group" style="margin-bottom: -9px !important;">
                                            <label class="form-control-sm col-sm-2">Status</label>
                                            <input type="text" class="form-control form-control-sm warn"  maxlength="25" #status  [(ngModel)]="holdCover.status" readonly tabindex="-1">
                                            <label class="form-control-sm col-sm-2">Approved By</label>
                                            <input type="text" class="form-control form-control-sm col-sm-7" maxlength="50" #appBy [(ngModel)]="holdCover.approvedBy" readonly tabindex="-1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="col-sm-2"></div>
                </div>
                <div class="form-row" *ngIf="!clickView">
                    <div class="form-group col-sm">
                        <div class="col-md-12 text-center">
                            <div class="cust-btn-container" style="margin-top: 10px !important;">
                                 <app-modal [btnTitle]="'Approval'" id="approvalBtnMdl" hidden>
                                    <div header>Approval</div>
                                    <div body>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <fieldset class="scheduler-border" style="padding-bottom: 42px !important;padding-left: 28px !important; padding-right: 36px !important;">
                                                    <div class="row" style="    margin-top: 39px;">
                                                    <label class="form-control-sm" style="margin-left: -1px !important;">Status</label>
                                                    <input type="text" class="form-control form-control-sm col-sm" style=" margin-right: 85px !important;">
                                                    </div>
                                                    <div class="row" style="margin-top: -14px !important;">
                                                        <select  class="form-control form-control-sm col-sm cust-sm" style="    margin-left: 6px;"></select>
                                                        <button class="cust" style="margin-right: 0px; margin-left: 3px !important;">For Approval</button>
                                                    </div>
                                                </fieldset>
                                                
                                            </div>
                                            <div class="col-sm-6">
                                                <fieldset class="scheduler-border" style="    margin-left: -20px !important;">
                                                    <div class="row" style="    margin-top: 16px !important;">
                                                        <label class="form-control-sm col-sm-4" style="margin-left: 15px;">Report</label>
                                                        <select  class="form-control form-control-sm col-sm cust-sm" style="margin-right: 25px !important;" disabled="disabled"></select>
                                                    </div>
                                                    <div class="row" style="margin-top: -14px !important;">
                                                        <label class="form-control-sm col-sm-4" style="margin-left: 15px;">No Of Copies</label>
                                                        <input type="text" class="form-control form-control-sm col-sm" style="margin-right: 25px !important;" disabled="disabled">
                                                    </div>
                                                    <div class="row" style="margin-top: -14px !important;">
                                                        <label class="form-control-sm col-sm-4" style="margin-left: 15px;">Destination</label>
                                                        <select  class="form-control form-control-sm col-sm cust-sm" style="margin-right: 25px !important;" disabled="disabled"></select>
                                                    </div>
                                                    <div class="row" style="margin-top: -14px !important;">
                                                        <label class="form-control-sm col-sm-4" style="margin-left: 15px;">Printer Name</label>
                                                        <select  class="form-control form-control-sm col-sm cust-sm" style="margin-right: 25px !important;" disabled="disabled"></select>
                                                    </div>
                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>
                                    <div footer class="text-center w-100">
                                        <div class="col-sm-12 text-center">
                                        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Cancel</a></button>
                                        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Print</a></button>
                                        </div>
                                    </div>
                                    </app-modal>
                                <button *ngIf="cancelHcBtnEnabled" type="button" class="cust-btn" (click)="onConfirmCancelHc()"><a>Cancel Hold Cover</a></button>
                                <button *ngIf="!cancelHcBtnEnabled" type="button" class="cust-btn dsbld" disabled="disabled">Cancel Hold Cover</button>
                                <button *ngIf="btnApprovalEnabled" class="cust-btn" type="button" (click)="onClickApprovalBtnMdl()">Approval</button>
                                <button *ngIf="!btnApprovalEnabled" class="cust-btn dsbld" disabled="disabled" type="button">Approval</button>
                                <!-- <button type="button" class="cust-btn" (click)="onClickCancel()"><a>Cancel</a></button> -->
                                <button type="button" class="cust-btn" (click)="onClickSave()" ><a>Save</a></button>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="form-row" *ngIf="clickView">
                    <div class="form-group col-sm">
                        <div class="col-md-12 text-center">
                            <div class="cust-btn-container" style="margin-top: 10px !important;">
                                <button *ngIf="cancelHcBtnEnabled" type="button" class="cust-btn" (click)="onConfirmCancelHc()"><a>Cancel Hold Cover</a></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-sm">
                        <div class="col-md-12 text-center">
                            <div class="cust-btn-container" style="margin-top: 10px !important;">
                                <app-modal hidden [btnTitle]="'List Of Values'" id="lovMdl">
                                    <div header>List Of Values</div>
                                    <div body>
                                       <app-cust-non-datatable [passData]="passDataQuoteLOV" (rowClick)="onRowClick($event)" (searchToDb)="searchQuery($event)"></app-cust-non-datatable>
                                    </div>
                                    <div footer class="text-center w-100">
                                        <div class="col-sm-12 text-center">
                                        <button class="cust-btn" type="button" (click)="onClickCancelQuoteLOV()"><a>Cancel</a></button>
                                        <button class="cust-btn" type="button" (click)="onSaveClickLOV()"><a>Ok</a></button>
                                        </div>
                                    </div>
                                </app-modal>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </ngb-tab>
         <ngb-tab id="Exit">
                <ng-template ngbTabTitle>
                    <div (click) = "onClickCancel()">Exit</div>
                </ng-template>
                <ng-template ngbTabContent></ng-template>
        </ngb-tab>
    </ngb-tabset>

</div>

<app-modal class="d-none" id="successModal">
    <div header style="height: 20px !important;"> </div>
    <div body class="container-flex text-center">
        <span  class="{{ icon }}" style="vertical-align: middle;"></span>
        <span style="vertical-align: middle; margin-left: 15px;">{{ genMsg }}</span>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Okay</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="warningMdl">
    <div header style="height: 20px !important;"> </div>
    <div body class="container-flex text-center">
        <span class="fa fa-info-circle fa-3x" style="vertical-align: middle;"></span>
        <span style="vertical-align: middle; margin-left: 15px;">{{ warningMsg }}</span>
    </div>
    <div footer class="d-flex justify-content-center w-100">
        <button class="cust-btn" type="button" (click)="onClickCancelHoldCover()"><a>Yes</a></button>                    
        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>No</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="modifMdl">
    <div header style="width: 550px !important;">Information Message</div>
    <div body class="container-flex text-center">
        <fieldset class="scheduler-border"> 
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;">Selected Quotation No. has an approved Hold Cover</p>
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;">Hold Cover No : <b>{{ holdCover.holdCoverNo }}</b></p>
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;">Please select an option</p>
        </fieldset>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button class="cust-btn" type="button" (click)="onClickCancelModifMdl()"><a>Cancel</a></button>
        <button class="cust-btn" type="button" (click)="onClickView()"><a>View</a></button>
        <button class="cust-btn" type="button" (click)="onClickModif()"><a>Modification</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="optionMdl">
    <div header>List of Values</div>
    <div body class="container-flex text-center">
        <app-cust-non-datatable #opt [passData]="passDataQuoteOptionsLOV" (rowClick)="onClickOptionRow($event)"></app-cust-non-datatable>
    </div>
    <div footer class="d-flex justify-content-center w-100">
        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Cancel</a></button>                    
        <button class="cust-btn" type="button" (click)="onClickOkOption()"><a>Ok</a></button>
    </div>
</app-modal>

<app-confirm-save (onYes)="onSaveClick()"></app-confirm-save>
<app-sucess-dialog [icon]="dialogIcon" [message]="dialogMessage" (onOk)="cancelFlag ? this.cancelBtn.onNo():this.btnCancelMainEnabled = false"></app-sucess-dialog>
<app-cancel-button (onYes)="onSaveClick('cancel')" [url]="'/hold-cover-monitoring'" ></app-cancel-button>


<img src="app/resources/images/Loading_icon2.gif" alt="loading.gif" id="loading" class="" style="position: absolute;top:50%;left:50%;-ms-transform: translate(-50%,-50%);transform: translate(-50%,-50%);z-index: 999999" *ngIf="loading">
<div style="position: fixed;width: 100%;height: 100%;z-index: 991;background-color: rgba(255, 255, 255, 0.5);" *ngIf="loading">