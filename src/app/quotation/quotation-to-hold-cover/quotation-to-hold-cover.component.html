<div class="cust-tabs-container">
	<h4>Quotation</h4>
	<ngb-tabset #tabset (tabChange)="onTabChange($event)">
		<ngb-tab title="Quotation to Hold Cover">
			<ng-template ngbTabContent>
				<div class="row">
					<div class="col-sm-2"></div>
					<div class="col-sm-8">
						<fieldset class="scheduler-border">
							<legend class="scheduler-border">Quotation Info</legend>
							<div class="col-sm-1"></div>
							<div class="col-sm">
								<div class="row" style="margin-right: 0px; margin-bottom: 11px;">
									<div class="input-group" style="margin-top: -10px;">
										&nbsp;
									</div>
									<div class="input-group">
										<div class="input-group" style="margin-bottom: -14px !important;">
											<label class="form-control-sm col-sm-2">Quotation No</label>
											<input type="text" class="form-control form-control-sm cap-input col-sm-1 warn" maxlength="3" appRequired ngbTooltip="Line" (change)="search('lineCd',$event)" [(ngModel)]="quoteInfo.quotationNo[0]">
											<input type="text" class="form-control form-control-sm cap-input col-sm-1 warn" maxlength="4" appRequired ngbTooltip="Year" style="margin-left: 3px;"  (change)="search('year',$event)" [(ngModel)]="quoteInfo.quotationNo[1]">
											<input type="text" class="form-control form-control-sm cap-input col-sm-2 warn text-right" maxlength="5" appRequired ngbTooltip="Sequence No" style="margin-left: 3px;"  (change)="search('seqNo',$event)" [(ngModel)]="quoteInfo.quotationNo[2]">
											<input type="text" class="form-control form-control-sm cap-input col-sm-1 warn text-right" maxlength="2" appRequired ngbTooltip="Revision No" style="margin-left: 3px;"  (change)="search('revNo',$event)" [(ngModel)]="quoteInfo.quotationNo[3]">
											<input type="text" class="form-control form-control-sm cap-input col-sm-1 warn text-right" maxlength="3" appRequired ngbTooltip="Company No" style="margin-left: 3px;"  (change)="search('cedingId',$event)" [(ngModel)]="quoteInfo.quotationNo[4]">
											<span>&nbsp;</span>
											<div (click)="showQuoteLov()"><a><i class="fa fa-search"></i></a></div>
											<!-- <div class="form-group" style="margin-bottom: 0px !important;margin-top: -3px !important;">
												<div class="cust-btn-container" style="margin-left: 15px;">
													<button type="button" class="cust-btn" style="z-index: 3 !important" (click)="clearAll()">Clear</button>
												</div>
											</div> -->
										</div>
										<div class="input-group" style="margin-bottom: -14px !important;">
											<label class="form-control-sm col-sm-2">Ceding Company</label>
											<input type="text" class="form-control form-control-sm" readonly tabindex="-1" [(ngModel)]="quoteInfo.cedingName">
										</div>
										<div class="input-group" style="margin-bottom: -14px !important;">
											<label class="form-control-sm col-sm-2">Insured</label>
											<input type="text" class="form-control form-control-sm" readonly tabindex="-1" [(ngModel)]="quoteInfo.insuredDesc">
										</div>
										<div class="input-group" style="margin-bottom: -9px !important;">
											<label class="form-control-sm col-sm-2">Risk</label>
											<input type="text" class="form-control form-control-sm" readonly tabindex="-1" [(ngModel)]="quoteInfo.riskName">
										</div>
									</div>
								</div>
							</div>
						</fieldset>
					</div>
					<div class="col-sm-2"></div>
				</div>
				<br>
				<div class="row">
					<div class="col-sm-2"></div>
					<div class="col-sm-8">
						<fieldset class="scheduler-border" style="margin-top: -25px !important;">
							<legend class="scheduler-border">Hold Cover Details</legend>
							<div class="col-sm">
								<div class="row" style="margin-right: 0px; margin-bottom: 11px;">
									<div class="input-group" style="margin-top: -10px;">
										&nbsp;
									</div>
									<div class="input-group">
										<div class="input-group" style="margin-bottom: -14px !important;">
											<label class="form-control-sm col-sm-2">Hold Cover No</label>
											<input type="text" class="form-control form-control-sm cust-sm" readonly [(ngModel)]="holdCoverNo">
											<label class="form-control-sm col-sm-2">Option No</label>
											<input type="text" class="form-control form-control-sm col-sm-7 warn r-only" readonly appRequired numbers-only [(ngModel)]="holdCover.optionId" (change)="searchQuoteId()">
											<div *ngIf="!fieldIconDsbl" class="text-search-ico" (click)="showOptionsLov()"><a><i class="fa fa-search"></i></a></div>
										</div>
										<div class="input-group" style="margin-bottom: -14px !important;">
											<div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
												<div class="input-group" style="margin-bottom: -0px !important;">
													<label class="form-control-sm col-sm-4">Period From</label>
													<div class="warn col-sm r-only dp-cont"  style="margin-left: 0px !important">
							                            <datepicker id="perFrom" [type]="'date'" [value]="periodFromArr[0]" [disabled]="fieldIconDsbl" (valueChange)="periodFromArr[0]=$event; setPeriodTo()" [required]="true"></datepicker>
							                        </div>
							                        <div class="warn col-sm-3 r-only dp-cont">
							                            <datepicker [type]="'time'" [(value)]="periodFromArr[1]" [disabled]="fieldIconDsbl" [required]="true"></datepicker>
							                        </div>
												</div>
											</div>
											<div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
												<div class="input-group" style="margin-bottom: -0px !important;">
													<label class="form-control-sm col-sm-4">Requested By</label>
													<input type="text" class="form-control form-control-sm col-sm r-only" readonly  maxlength="50" [(ngModel)]="holdCover.reqBy">
												</div>
											</div>
										</div>
										<div class="input-group" style="margin-bottom: -14px !important;">
											<div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
												<div class="input-group" style="margin-bottom: -0px !important;">
													<label class="form-control-sm col-sm-4">Period To</label>
													<div class="warn col-sm r-only dp-cont" style="margin-left: 0px !important">
							                            <datepicker [type]="'date'" [(value)]="periodToArr[0]" [disabled]="fieldIconDsbl"  [minDate]="periodFromArr[0]" [required]="true"></datepicker>
							                        </div>
							                        <div class="warn col-sm-3 r-only dp-cont">
							                            <datepicker [type]="'time'" [(value)]="periodToArr[1]" [disabled]="fieldIconDsbl" [required]="true"></datepicker>
							                        </div>
												</div>
											</div>
											<div class="col-sm-6" style="padding: 0px !important;margin: 0px !important">
												<div class="input-group" style="margin-bottom: -0px !important;">
													<label class="form-control-sm col-sm-4">Request Date</label>
													<div class="warn col-sm r-only dp-cont" style="margin-left: 0px !important">
							                            <datepicker [type]="'date'" [(value)]="holdCover.reqDate" [disabled]="fieldIconDsbl"></datepicker>
							                        </div>
												</div>
											</div>
										</div>
										<div class="input-group" style="margin-bottom: -14px !important;">
											<label class="form-control-sm col-sm-2" style="padding-left: 0px !important;" >Co. Ref. Hold Cover No</label>
											<input type="text" class="form-control form-control-sm col-sm r-only" maxlength="25" readonly [(ngModel)]="holdCover.compRefHoldCovNo">
											<label class="form-control-sm col-sm-2">Prepared By</label>
											<input type="text" class="form-control form-control-sm col-sm-7" maxlength="50" readonly tabindex="-1" [(ngModel)]="holdCover.preparedBy">
										</div>
										<div class="input-group" style="margin-bottom: -9px !important;">
											<label class="form-control-sm col-sm-2">Status</label>
											<input type="text" class="form-control form-control-sm warn" maxlength="25" readonly tabindex="-1" [(ngModel)]="holdCover.status">
											<label class="form-control-sm col-sm-2">Approved By</label>
											<input type="text" class="form-control form-control-sm col-sm-7" maxlength="50" readonly tabindex="-1" [(ngModel)]="holdCover.approvedBy">
										</div>
									</div>
								</div>
							</div>
						</fieldset>
					</div>
					<div class="col-sm-2"></div>
				</div>

				<div class="form-row">
					<div class="form-group col-sm">
						<div class="col-md-12 text-center">
							<div class="cust-btn-container" style="margin-top: 10px !important;">
								<button type="button" class="cust-btn" [disabled]="disableCancelHc" (click)="showCancelHcMdl()">Cancel Hold Cover</button>
								<button type="button" class="cust-btn" [disabled]="(holdCoverNo=='')?true:false" (click)="showApprovalMdl()">Approval</button>
								<button type="button" class="cust-btn" (click)="onClickSave()">Save</button>
							</div>
						</div>
					</div>
				</div>
				
				
			</ng-template>
		</ngb-tab>
	</ngb-tabset>
</div>

<!-- MODALS -->

<app-modal class="d-none" id="quoteMdl">
    <div header>List Of Values</div>
    <div body class="container-flex">
       <app-cust-non-datatable [passData]="passDataQuoteLOV" (rowClick)="onRowClick($event)"></app-cust-non-datatable>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button type="button" class="cust-btn" (click)="modalService.dismissAll();"><a>Cancel</a></button>
		<button type="button" class="cust-btn" (click)="onClickOkQuoteLov()"><a>Ok</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="optionMdl">
    <div header>List Of Values</div>
    <div body class="container-flex">
       <app-cust-non-datatable [passData]="passDataOptionsLOV" #opt (rowClick)="onRowClickOpt($event)"></app-cust-non-datatable>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button type="button" class="cust-btn" (click)="modalService.dismissAll();"><a>Cancel</a></button>
		<button type="button" class="cust-btn" (click)="onClickOkOptionsLov()"><a>Ok</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="cancelHcMdl">
    <div header>Confirmation</div>
    <div body>Are you sure you want to cancel this Hold Cover?</div>
    <div footer class="cust-btn-container">                    
        <button type="button" class="cust-btn" (click)="onCancelHc();modalService.dismissAll();"><a>Yes</a></button>
		<button type="button" class="cust-btn" (click)="modalService.dismissAll();"><a>No</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="modifMdl">
    <div header style="width: 550px !important;">Confirmation Message</div>
    <div body class="container-flex text-center">
        <fieldset class="scheduler-border"> 
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;">Selected Quotation No. has an approved Hold Cover</p>
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;"><b>{{ holdCoverNo }}</b></p>
            <p class="form-control-sm" style=" margin: 0px !important; padding: 0px !important;">Please select an option</p>
        </fieldset>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button class="cust-btn" type="button" (click)="onCancelModifLov()"><a>Cancel</a></button>
        <button class="cust-btn" type="button" (click)="newHc(true);modalService.dismissAll();"><a>View</a></button>
        <button class="cust-btn" type="button" (click)="modalService.dismissAll();"><a>Modification</a></button>
    </div>
</app-modal>

<app-modal class="d-none" id="approvalMdl">
    <div header>Approval</div>
    <div body class="container-flex" style="min-width: 700px !important">
    	<div class="row">
 	    	<div class="col-sm-6">
 	    		<fieldset class="scheduler-border" style="padding-bottom: 21px !important;padding-top: 15px !important;">
 	    			<div class="input-group" style="padding-left: 45px !important;padding-right: 50px !important; margin-bottom: -14px !important;" >
 	    				<label class="form-control-sm">Status</label>
						<input type="text" class="form-control form-control-sm" [(ngModel)]="holdCover.status" readonly>
						<div class="col-sm-1"></div>
 	    			</div>
 	    			<div class="input-group" style="padding-right: 10px!important;padding-left: 10px !important;">
						<div class="cust-btn-container col-sm" style="padding-right: 0px !important">
							<button type="button" class="cust-btn col-sm" (click)="modalService.dismissAll();"><a>{{ aprrovalBtnTxt }}</a></button>
						</div>		
						<div class="cust-btn-container col-sm" style="padding-left: 0px !important">
							<button type="button" class="cust-btn col-sm" [disabled]="isApproved" (click)="modalService.dismissAll();">Rejected</button>
						</div>
 	    			</div>
 	    		</fieldset>
 	    	</div>
 	    	<div class="col-sm-6">
 	    		<fieldset class="scheduler-border" style="padding-bottom: 15px !important;padding-top: 15px !important;">
 	    			<div class="input-group" style="margin-bottom: -14px !important;">
 	    				<label class="form-control-sm col-sm-3">Report</label>
						<select  class="form-control form-control-sm col-sm cust-sm" [(ngModel)]="report">
							<option value="HOLD COVER LETTER">Hold Cover Letter</option>
						</select>
 	    			</div>
 	    			<div class="input-group" style="margin-bottom: -14px !important;">
 	    				<label class="form-control-sm col-sm-3">Destination</label>
						<select  class="form-control form-control-sm col-sm cust-sm" [(ngModel)]="destination">
							<option value="SCREEN">SCREEN</option>
							<option value="PDF">PDF</option>
							<option value="PRINTER">PRINTER</option>
						</select>
 	    			</div>
 	    		</fieldset>
 	    	</div>
    	</div>
    </div>
    <div footer class="d-flex justify-content-center w-100">                    
        <button type="button" class="cust-btn" (click)="modalService.dismissAll();"><a>Cancel</a></button>
		<button type="button" class="cust-btn" (click)="onClickPrint();modalService.dismissAll();" [disabled]="(report == '')?true:false">Print</button>
    </div>
</app-modal>

<app-confirm-save (onYes)="onSaveHoldCover()"></app-confirm-save>
<app-sucess-dialog [icon]="dialogIcon" [message]="dialogMessage" (onOk)="cancelFlag ? this.cancelBtn.onNo() : null"></app-sucess-dialog>
<app-cancel-button (onYes)="onSaveHoldCover('cancel')" [url]="'/hold-cover-monitoring'" ></app-cancel-button>